<!DOCTYPE html>
<html>
<head>
    <title>Sitio de captura para el CTF</title>
    <!-- Incluir una librería para calcular MD5 en el navegador -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script>
</head>
<body>
    <h1>Sitio de captura para el CTF</h1>
    <div id="result">Esperando datos...</div>
    <script>
        try {
            // Acceder al DOM del sitio "Imagen Importante" usando window.opener
            const img = window.opener?.document.querySelector('img'); // Ajusta el selector si es necesario
            if (img) {
                const width = img.naturalWidth;
                const height = img.naturalHeight;
                const level = width * height;
                // Mostrar el nivel en la página
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = `Nivel de Pepe: ${level}<br>Hash MD5: ${md5(level.toString())}`;
            } else {
                document.getElementById('result').innerHTML = 'No se encontró la imagen de Pepe';
            }
        } catch (err) {
            document.getElementById('result').innerHTML = `Error al acceder al DOM: ${err.message}`;
        }
    </script>
</body>
</html>
